/**
 * Megamenu style
 *
 * This file is *not* processed by gulp. Instead, the Max Megamenu
 * plug-in includes a SASS compiler written in PHP. Still, "gulp
 * browser-sync" will cooperate with devsupport/reload-caches.php to
 * handle changes to this file like it does any other.
 */

/* We make sure to use the exact same selector hierarchy as
 * wp-content/plugins/megamenu/megamenu.scss, except with a leading
 * "megamenu" added on top so that we win according to the CSS
 * priority rules. */
megamenu #{$wrap} {  /* i.e. #mega-menu-wrap-primary */
  /** Push menu onto new line **/
  clear: both;

  #{$menu} {         /* i.e. #mega-menu-primary */
    /* We don\'t want a teramenu: */
    max-width: 800px;
    /* Keep it centered (despite not occupying the full width): */
    margin: 0 auto;

    @include mobile {
      border: 1px solid black;
    }

    > li.mega-menu-item {
      > a.mega-menu-link {
        color: black;
        font: 13pt \"Open Sans Regular\", sans-serif;
        @include desktop {
          background-image: url(/wp-content/themes/epfl-sti/img/src/sideshadow.gif);
        }
        background-repeat: no-repeat;
        background-position-x: -10px;
        height: 20pt;
        text-transform: uppercase;
      }
      @include desktop {
        &.mega-toggle-on > a:before {
          content: '';
          position: absolute;
          top:   -200px;
          left: 0px;
          height: 200px;
          width: 100%;
          background-color: #eee;
          z-index: -1;
        }
      }
    }

    > li.mega-menu-megamenu {
      > ul.mega-sub-menu {
        background-color: white;
      }
    }
  }
}
