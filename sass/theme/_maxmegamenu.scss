/**
 * Megamenu style
 *
 * This file is *not* processed by gulp. Instead, the Max Megamenu
 * plug-in includes a SASS compiler written in PHP. Still, "gulp
 * browser-sync" will cooperate with devsupport/reload-caches.php to
 * handle changes to this file like it does any other.
 */

@mixin maxmegamenu-mobile {
    @media only screen and (max-width : $responsive_breakpoint) {
        @content;
    }
}

@mixin maxmegamenu-desktop {
    @media only screen and (min-width : $responsive_breakpoint + 1) {
        @content;
    }
}


/* We make sure to use the same selector hierarchy as
 * wp-content/plugins/megamenu/megamenu.scss, except with a leading
 * "megamenu" added on top so that we win according to the CSS
 * priority rules. */
megamenu div.mega-menu-wrap {  /* i.e. #mega-menu-wrap-primary */
  /** Push menu onto new line **/
  clear: both;

  ul.mega-menu {         /* i.e. #mega-menu-primary */
    /* We don\'t want a teramenu: */
    max-width: 800px;
    /* Keep it centered (despite not occupying the full width): */
    margin: 0 auto;

    @include maxmegamenu-mobile {
      border: 1px solid black;
    }

    > li.mega-menu-item {
      > a.mega-menu-link {  // Top-level headers, always visible
        color: black;
        font: 13pt \"Open Sans Regular\", sans-serif;
        padding: 6pt;
        @include maxmegamenu-desktop {
          background-image: url(/wp-content/themes/epfl-sti/img/src/sideshadow.gif);
          background-repeat: no-repeat;
          background-position-x: -10px;
          padding-left: 20px;
        }
        text-transform: uppercase;
      }
      // Gray tabs dropping a shadow against the topbar on hover
      &.mega-toggle-on > a:before {
        content: '';
        position: absolute;
        top:   -200px;
        left: 0px;
        height: 200px;
        width: 100%;
        background-color: #eee;
        z-index: -1;
      }
    }

    > li.mega-menu-megamenu {
      > ul.mega-sub-menu {   // The pop-up white area
        background-color: white;
      }
    }
  }

  // Burger menu
  .mega-menu-toggle .mega-toggle-block-1:before {
    font-size: 28pt;
  }
}
